name: Manual Deploy Workflow
run-name: ${{ github.actor }} is manually deploying
on:
  workflow_dispatch:
    inputs:
      brand:
        type: choice
        options:
          - argos
          - habitat
          - tu
      env:
        type: choice
        options:
          - dev
          - stg
      deploy-suffix:
        type: string
        description:

jobs:
  setup:
    runs-on: ubuntu-latest
    outputs:
      node-env: ${{ steps.conf-env.outputs.node-env }}
      brand-deploy-suffix: ${{ steps.conf-env.outputs.brand-deploy-suffix }}
    steps:
      - uses: actions/checkout@v3
      - name: Configure environment variables
        id: conf-env
        uses: ./.github/actions/setup
        with:
          env: ${{ inputs.env }}
          branch: ${{ github.ref_name }}
          deploy-suffix: ${{ inputs.deploy-suffix }}
  test-output:
    needs: setup
    runs-on: ubuntu-latest
    steps:
      run: |
        echo "do we have the value ${{ inputs.brand }}${{ needs.setup.outputs.brand-deploy-suffix }}"
